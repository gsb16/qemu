<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>iova-tree header &mdash; QEMU 4.1.50 (v4.0.0-470-g250533e6-dirty) documentation</title>
    
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '4.1.50 (v4.0.0-470-g250533e6-dirty)',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="QEMU 4.1.50 (v4.0.0-470-g250533e6-dirty) documentation" href="../index.html" />
    <link rel="up" title="QEMU headers" href="../qemu.html" />
    <link rel="next" title="iov header" href="iov.html" />
    <link rel="prev" title="int128 header" href="int128.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="iova-tree-header">
<h1>iova-tree header<a class="headerlink" href="#iova-tree-header" title="Permalink to this headline">¶</a></h1>
<p>The documentation of QEMU&#8217;s <code class="docutils literal"><span class="pre">qemu/iova-tree.h</span></code> header.</p>
<dl class="function">
<dt id="c.iova_tree_new">
IOVATree * <code class="descname">iova_tree_new</code><span class="sig-paren">(</span>void<span class="sig-paren">)</span><a class="headerlink" href="#c.iova_tree_new" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">void</span></code></dt>
<dd>no arguments</dd>
</dl>
<p><strong>Description</strong></p>
<p>Create a new iova tree.</p>
<p><strong>Return</strong></p>
<p>the tree pointer when succeeded, or NULL if error.</p>
<dl class="function">
<dt id="c.iova_tree_insert">
int <code class="descname">iova_tree_insert</code><span class="sig-paren">(</span>IOVATree *<em>&nbsp;tree</em>, DMAMap *<em>&nbsp;map</em><span class="sig-paren">)</span><a class="headerlink" href="#c.iova_tree_insert" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">IOVATree</span> <span class="pre">*</span> <span class="pre">tree</span></code></dt>
<dd>the iova tree to insert</dd>
<dt><code class="docutils literal"><span class="pre">DMAMap</span> <span class="pre">*</span> <span class="pre">map</span></code></dt>
<dd>the mapping to insert</dd>
</dl>
<p><strong>Description</strong></p>
<p>Insert an iova range to the tree.  If there is overlapped
ranges, IOVA_ERR_OVERLAP will be returned.</p>
<p><strong>Return</strong></p>
<p>0 if succeeded, or &lt;0 if error.</p>
<dl class="function">
<dt id="c.iova_tree_remove">
int <code class="descname">iova_tree_remove</code><span class="sig-paren">(</span>IOVATree *<em>&nbsp;tree</em>, DMAMap *<em>&nbsp;map</em><span class="sig-paren">)</span><a class="headerlink" href="#c.iova_tree_remove" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">IOVATree</span> <span class="pre">*</span> <span class="pre">tree</span></code></dt>
<dd>the iova tree to remove range from</dd>
<dt><code class="docutils literal"><span class="pre">DMAMap</span> <span class="pre">*</span> <span class="pre">map</span></code></dt>
<dd>the map range to remove</dd>
</dl>
<p><strong>Description</strong></p>
<p>Remove mappings from the tree that are covered by the map range
provided.  The range does not need to be exactly what has inserted,
all the mappings that are included in the provided range will be
removed from the tree.  Here map-&gt;translated_addr is meaningless.</p>
<p><strong>Return</strong></p>
<p>0 if succeeded, or &lt;0 if error.</p>
<dl class="function">
<dt id="c.iova_tree_find">
DMAMap * <code class="descname">iova_tree_find</code><span class="sig-paren">(</span>IOVATree *<em>&nbsp;tree</em>, DMAMap *<em>&nbsp;map</em><span class="sig-paren">)</span><a class="headerlink" href="#c.iova_tree_find" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">IOVATree</span> <span class="pre">*</span> <span class="pre">tree</span></code></dt>
<dd>the iova tree to search from</dd>
<dt><code class="docutils literal"><span class="pre">DMAMap</span> <span class="pre">*</span> <span class="pre">map</span></code></dt>
<dd>the mapping to search</dd>
</dl>
<p><strong>Description</strong></p>
<p>Search for a mapping in the iova tree that overlaps with the
mapping range specified.  Only the first found mapping will be
returned.</p>
<p><strong>Return</strong></p>
<p>DMAMap pointer if found, or NULL if not found.  Note that
the returned DMAMap pointer is maintained internally.  User should
only read the content but never modify or free the content.  Also,
user is responsible to make sure the pointer is valid (say, no
concurrent deletion in progress).</p>
<dl class="function">
<dt id="c.iova_tree_find_address">
DMAMap * <code class="descname">iova_tree_find_address</code><span class="sig-paren">(</span>IOVATree *<em>&nbsp;tree</em>, hwaddr<em>&nbsp;iova</em><span class="sig-paren">)</span><a class="headerlink" href="#c.iova_tree_find_address" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">IOVATree</span> <span class="pre">*</span> <span class="pre">tree</span></code></dt>
<dd>the iova tree to search from</dd>
<dt><code class="docutils literal"><span class="pre">hwaddr</span> <span class="pre">iova</span></code></dt>
<dd>the iova address to find</dd>
</dl>
<p><strong>Description</strong></p>
<p>Similar to iova_tree_find(), but it tries to find mapping with
range iova=iova &amp; size=0.</p>
<p><strong>Return</strong></p>
<p>same as iova_tree_find().</p>
<dl class="function">
<dt id="c.iova_tree_foreach">
void <code class="descname">iova_tree_foreach</code><span class="sig-paren">(</span>IOVATree *<em>&nbsp;tree</em>, iova_tree_iterator<em>&nbsp;iterator</em><span class="sig-paren">)</span><a class="headerlink" href="#c.iova_tree_foreach" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">IOVATree</span> <span class="pre">*</span> <span class="pre">tree</span></code></dt>
<dd>the iova tree to iterate on</dd>
<dt><code class="docutils literal"><span class="pre">iova_tree_iterator</span> <span class="pre">iterator</span></code></dt>
<dd>the interator for the mappings, return true to stop</dd>
</dl>
<p><strong>Description</strong></p>
<p>Iterate over the iova tree.</p>
<p><strong>Return</strong></p>
<p>1 if found any overlap, 0 if not, &lt;0 if error.</p>
<dl class="function">
<dt id="c.iova_tree_destroy">
void <code class="descname">iova_tree_destroy</code><span class="sig-paren">(</span>IOVATree *<em>&nbsp;tree</em><span class="sig-paren">)</span><a class="headerlink" href="#c.iova_tree_destroy" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">IOVATree</span> <span class="pre">*</span> <span class="pre">tree</span></code></dt>
<dd>the iova tree to destroy</dd>
</dl>
<p><strong>Description</strong></p>
<p>Destroy an existing iova tree.</p>
<p><strong>Return</strong></p>
<p>None.</p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">QEMU</a></h1>



<p class="blurb">Developers Guide</p>



<p>
<iframe src="https://ghbtns.com/github-btn.html?user=&repo=&type=watch&count=true&size=large"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>




<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../decodetree.html">Decodetree Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kconfig.html">QEMU and Kconfig</a></li>
<li class="toctree-l1"><a class="reference internal" href="../loads-stores.html">Load and Store APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../memory.html">The memory API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration.html">Migration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../qapi.html">QAPI headers</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../qemu.html">QEMU headers</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="bitops.html">Bitwise operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="coroutine.html">QEMU coroutine implementation</a></li>
<li class="toctree-l2"><a class="reference internal" href="atomic128.html">atomic128 header</a></li>
<li class="toctree-l2"><a class="reference internal" href="atomic.html">atomic header</a></li>
<li class="toctree-l2"><a class="reference internal" href="base64.html">base64 header</a></li>
<li class="toctree-l2"><a class="reference internal" href="bcd.html">bcd header</a></li>
<li class="toctree-l2"><a class="reference internal" href="bitmap.html">bitmap header</a></li>
<li class="toctree-l2"><a class="reference internal" href="bswap.html">bswap header</a></li>
<li class="toctree-l2"><a class="reference internal" href="buffer.html">buffer header</a></li>
<li class="toctree-l2"><a class="reference internal" href="compiler.html">compiler header</a></li>
<li class="toctree-l2"><a class="reference internal" href="config-file.html">config-file header</a></li>
<li class="toctree-l2"><a class="reference internal" href="coroutine_int.html">coroutine_int header</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpuid.html">cpuid header</a></li>
<li class="toctree-l2"><a class="reference internal" href="crc32c.html">crc32c header</a></li>
<li class="toctree-l2"><a class="reference internal" href="ctype.html">ctype header</a></li>
<li class="toctree-l2"><a class="reference internal" href="cutils.html">cutils header</a></li>
<li class="toctree-l2"><a class="reference internal" href="drm.html">drm header</a></li>
<li class="toctree-l2"><a class="reference internal" href="envlist.html">envlist header</a></li>
<li class="toctree-l2"><a class="reference internal" href="error-report.html">error-report header</a></li>
<li class="toctree-l2"><a class="reference internal" href="event_notifier.html">event_notifier header</a></li>
<li class="toctree-l2"><a class="reference internal" href="fifo32.html">fifo32 header</a></li>
<li class="toctree-l2"><a class="reference internal" href="fifo8.html">fifo8 header</a></li>
<li class="toctree-l2"><a class="reference internal" href="filemonitor.html">filemonitor header</a></li>
<li class="toctree-l2"><a class="reference internal" href="futex.html">futex header</a></li>
<li class="toctree-l2"><a class="reference internal" href="guest-random.html">guest-random header</a></li>
<li class="toctree-l2"><a class="reference internal" href="hbitmap.html">hbitmap header</a></li>
<li class="toctree-l2"><a class="reference internal" href="help_option.html">help_option header</a></li>
<li class="toctree-l2"><a class="reference internal" href="host-utils.html">host-utils header</a></li>
<li class="toctree-l2"><a class="reference internal" href="id.html">id header</a></li>
<li class="toctree-l2"><a class="reference internal" href="int128.html">int128 header</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">iova-tree header</a></li>
<li class="toctree-l2"><a class="reference internal" href="iov.html">iov header</a></li>
<li class="toctree-l2"><a class="reference internal" href="jhash.html">jhash header</a></li>
<li class="toctree-l2"><a class="reference internal" href="job.html">job header</a></li>
<li class="toctree-l2"><a class="reference internal" href="lockable.html">lockable header</a></li>
<li class="toctree-l2"><a class="reference internal" href="log-for-trace.html">log-for-trace header</a></li>
<li class="toctree-l2"><a class="reference internal" href="log.html">log header</a></li>
<li class="toctree-l2"><a class="reference internal" href="main-loop.html">main-loop header</a></li>
<li class="toctree-l2"><a class="reference internal" href="memfd.html">memfd header</a></li>
<li class="toctree-l2"><a class="reference internal" href="mmap-alloc.html">mmap-alloc header</a></li>
<li class="toctree-l2"><a class="reference internal" href="module.html">module header</a></li>
<li class="toctree-l2"><a class="reference internal" href="notify.html">notify header</a></li>
<li class="toctree-l2"><a class="reference internal" href="option.html">option header</a></li>
<li class="toctree-l2"><a class="reference internal" href="option_int.html">option_int header</a></li>
<li class="toctree-l2"><a class="reference internal" href="osdep.html">osdep header</a></li>
<li class="toctree-l2"><a class="reference internal" href="path.html">path header</a></li>
<li class="toctree-l2"><a class="reference internal" href="pmem.html">pmem header</a></li>
<li class="toctree-l2"><a class="reference internal" href="processor.html">processor header</a></li>
<li class="toctree-l2"><a class="reference internal" href="qdist.html">qdist header</a></li>
<li class="toctree-l2"><a class="reference internal" href="qemu-print.html">qemu-print header</a></li>
<li class="toctree-l2"><a class="reference internal" href="qht.html">qht header</a></li>
<li class="toctree-l2"><a class="reference internal" href="qsp.html">qsp header</a></li>
<li class="toctree-l2"><a class="reference internal" href="queue.html">queue header</a></li>
<li class="toctree-l2"><a class="reference internal" href="range.html">range header</a></li>
<li class="toctree-l2"><a class="reference internal" href="ratelimit.html">ratelimit header</a></li>
<li class="toctree-l2"><a class="reference internal" href="rcu.html">rcu header</a></li>
<li class="toctree-l2"><a class="reference internal" href="rcu_queue.html">rcu_queue header</a></li>
<li class="toctree-l2"><a class="reference internal" href="readline.html">readline header</a></li>
<li class="toctree-l2"><a class="reference internal" href="seqlock.html">seqlock header</a></li>
<li class="toctree-l2"><a class="reference internal" href="sockets.html">sockets header</a></li>
<li class="toctree-l2"><a class="reference internal" href="stats64.html">stats64 header</a></li>
<li class="toctree-l2"><a class="reference internal" href="sys_membarrier.html">sys_membarrier header</a></li>
<li class="toctree-l2"><a class="reference internal" href="systemd.html">systemd header</a></li>
<li class="toctree-l2"><a class="reference internal" href="thread.html">thread header</a></li>
<li class="toctree-l2"><a class="reference internal" href="thread-posix.html">thread-posix header</a></li>
<li class="toctree-l2"><a class="reference internal" href="thread-win32.html">thread-win32 header</a></li>
<li class="toctree-l2"><a class="reference internal" href="throttle.html">throttle header</a></li>
<li class="toctree-l2"><a class="reference internal" href="throttle-options.html">throttle-options header</a></li>
<li class="toctree-l2"><a class="reference internal" href="timed-average.html">timed-average header</a></li>
<li class="toctree-l2"><a class="reference internal" href="timer.html">timer header</a></li>
<li class="toctree-l2"><a class="reference internal" href="typedefs.html">typedefs header</a></li>
<li class="toctree-l2"><a class="reference internal" href="unicode.html">unicode header</a></li>
<li class="toctree-l2"><a class="reference internal" href="units.html">units header</a></li>
<li class="toctree-l2"><a class="reference internal" href="uri.html">uri header</a></li>
<li class="toctree-l2"><a class="reference internal" href="uuid.html">uuid header</a></li>
<li class="toctree-l2"><a class="reference internal" href="vfio-helpers.html">vfio-helpers header</a></li>
<li class="toctree-l2"><a class="reference internal" href="win_dump_defs.html">win_dump_defs header</a></li>
<li class="toctree-l2"><a class="reference internal" href="xattr.html">xattr header</a></li>
<li class="toctree-l2"><a class="reference internal" href="xxhash.html">xxhash header</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../qom.html">QOM headers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../stable-process.html">QEMU and the stable process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../secure-coding-practices.html">Secure Coding Practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tcg.html">Translator Internals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing.html">Testing in QEMU</a></li>
</ul>


<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, The QEMU Project Developers.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.3.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.7</a>
      
    </div>

    

    
  </body>
</html>